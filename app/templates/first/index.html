{% macro content() %}
    <h1 class="text-3xl font-bold">{{ title }}</h1>

    {% if config['FLASK_ENV'] == 'production' %}
        <script>
            posthog.identify(
                "{{ current_user.id }}", // Replace 'distinct_id' with your user's unique identifier
                {
                    email: "{{current_user.email}}",
                    name: "{{current_user.username}}",
                } // optional: set additional user properties
            );
        </script>
    {% endif %}
{% endmacro %}

{% if htmx.boosted %}
    <title>{{ title }}</title>

    <div
        id="top-bar"
        hx-swap-oob="innerHTML">
        {% block top_bar %}
            <div class="container flex w-full justify-end">
                <a
                    href="{{ url_for('users.settings') }}"
                    hx-boost="true"
                    hx-swap="show:window:top"
                    hx-target="#content">
                    <svg
                        xmlns="http://www.w3.org/2000/svg"
                        fill="none"
                        viewBox="0 0 24 24"
                        class="hover:stroke-primary size-7 stroke-current stroke-[1.5px] transition-colors duration-200 ease-out">
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M10.5 6h9.75M10.5 6a1.5 1.5 0 1 1-3 0m3 0a1.5 1.5 0 1 0-3 0M3.75 6H7.5m3 12h9.75m-9.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-3.75 0H7.5m9-6h3.75m-3.75 0a1.5 1.5 0 0 1-3 0m3 0a1.5 1.5 0 0 0-3 0m-9.75 0h9.75" />
                    </svg>
                </a>
            </div>
        {% endblock %}
    </div>
    {{ content() }}
{% else %}
    {% extends 'base.html' %}
    {% block content %}
        {{ content() }}
    {% endblock %}
{% endif %}
